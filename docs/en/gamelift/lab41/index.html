<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.101.0" />
    <meta name="description" content="Full Stack Game Demo">
<meta name="author" content="Jinsung Thomas Park">

    <link rel="icon" href="/aws-gamelift-sample/en/images/favicon.png" type="image/png">

    <title>Making Lambda Functions :: Start Full Stack Game with GameLift</title>

    
    <link href="/aws-gamelift-sample/en/css/nucleus.css?1657726513" rel="stylesheet">
    <link href="/aws-gamelift-sample/en/css/fontawesome-all.min.css?1657726513" rel="stylesheet">
    <link href="/aws-gamelift-sample/en/css/hybrid.css?1657726513" rel="stylesheet">
    <link href="/aws-gamelift-sample/en/css/featherlight.min.css?1657726513" rel="stylesheet">
    <link href="/aws-gamelift-sample/en/css/perfect-scrollbar.min.css?1657726513" rel="stylesheet">
    <link href="/aws-gamelift-sample/en/css/auto-complete.css?1657726513" rel="stylesheet">
    <link href="/aws-gamelift-sample/en/css/atom-one-dark-reasonable.css?1657726513" rel="stylesheet">
    <link href="/aws-gamelift-sample/en/css/theme.css?1657726513" rel="stylesheet">
    <link href="/aws-gamelift-sample/en/css/hugo-theme.css?1657726513" rel="stylesheet">
    
      <link href="/aws-gamelift-sample/en/css/theme-aws.css?1657726513" rel="stylesheet">
    

    <script src="/aws-gamelift-sample/en/js/jquery-3.3.1.min.js?1657726513"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/aws-gamelift-sample/en/gamelift/lab41/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/aws-gamelift-sample/ko">
	<img src="/aws-gamelift-sample/ko/images/logo.png" height="70px"/>
</a>


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-169409427-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-169409427-1');
</script>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/aws-gamelift-sample/en/js/lunr.min.js?1657726513"></script>
<script type="text/javascript" src="/aws-gamelift-sample/en/js/auto-complete.js?1657726513"></script>
<script type="text/javascript">
    
        var baseurl = "\/aws-gamelift-sample\/en\/\/en";
    
</script>
<script type="text/javascript" src="/aws-gamelift-sample/en/js/search.js?1657726513"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/intro/" title="GameLift HoL Introduction" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/intro/">
          <b>0. </b>GameLift HoL Introduction
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/intro/lab01/" title="Workshop Contents" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/intro/lab01/">
          <b>0-1. </b>Workshop Contents
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/intro/lab02/" title="HoL Preparation" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/intro/lab02/">
          <b>0-2. </b>HoL Preparation
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/intro/lab03/" title="Service Information" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/intro/lab03/">
          <b>0-3. </b>Service Information
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/awsservice/" title="Build AWS Services" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/awsservice/">
          <b>1. </b>Build AWS Services
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/awsservice/lab10/" title="Deploy CloudFormation Stack" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/awsservice/lab10/">
          <b>1-0. </b>Deploy CloudFormation Stack
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/awsservice/lab11/" title="Creating DynamoDB" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/awsservice/lab11/">
          <b>1-1. </b>Creating DynamoDB
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/awsservice/lab12/" title="ElastiCache Configuration" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/awsservice/lab12/">
          <b>1-2. </b>ElastiCache Configuration
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/awsservice/lab13/" title="Making SQS" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/awsservice/lab13/">
          <b>1-3. </b>Making SQS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/awsservice/lab14/" title="Creating IAM Policy and Role" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/awsservice/lab14/">
          <b>1-4. </b>Creating IAM Policy and Role
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/flexmatch/" title="GameLift FlexMatch Lab" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/flexmatch/">
          <b>2. </b>GameLift FlexMatch Lab
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/flexmatch/lab21/" title="Making Lambda Functions" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/flexmatch/lab21/">
          <b>2-1. </b>Making Lambda Functions
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/flexmatch/lab22/" title="Configuring API Gateway" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/flexmatch/lab22/">
          <b>2-2. </b>Configuring API Gateway
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/flexmatch/lab23/" title="S3 Web Hosting" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/flexmatch/lab23/">
          <b>2-3. </b>S3 Web Hosting
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/flexmatch/lab24/" title="Creating Game Server Build &amp; Fleet" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/flexmatch/lab24/">
          <b>2-4. </b>Creating Game Server Build &amp; Fleet
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/flexmatch/lab25/" title="Build Serverless FlexMatch" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/flexmatch/lab25/">
          <b>2-5. </b>Build Serverless FlexMatch
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/flexmatch/lab26/" title="Configuring Matchmaking Event" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/flexmatch/lab26/">
          <b>2-6. </b>Configuring Matchmaking Event
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/flexmatch/lab27/" title="Connecting Game Client with FlexMatch" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/flexmatch/lab27/">
          <b>2-7. </b>Connecting Game Client with FlexMatch
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/flexmatch/lab28/" title="Analyzing Matchmaking Event" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/flexmatch/lab28/">
          <b>2-8. </b>Analyzing Matchmaking Event
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/flexmatch/lab29/" title="Test FlexMatch Ruleset" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/flexmatch/lab29/">
          <b>2-9. </b>Test FlexMatch Ruleset
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/fleetiq/" title="Start with FleetIQ" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/fleetiq/">
          <b>3. </b>Start with FleetIQ
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/fleetiq/lab31/" title="Preparations" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/fleetiq/lab31/">
          <b>3-1. </b>Preparations
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/fleetiq/lab32/" title="Setting Fiesta IAM" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/fleetiq/lab32/">
          <b>3-2. </b>Setting Fiesta IAM
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/fleetiq/lab33/" title="Creating Game Server Group" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/fleetiq/lab33/">
          <b>3-3. </b>Creating Game Server Group
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/fleetiq/lab34/" title="Creating Server on FleetIQ" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/fleetiq/lab34/">
          <b>3-4. </b>Creating Server on FleetIQ
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/fleetiq/lab35/" title="Creating Client on FleetIQ" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/fleetiq/lab35/">
          <b>3-5. </b>Creating Client on FleetIQ
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/fleetiq/lab36/" title="Connect Server and Client" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/fleetiq/lab36/">
          <b>3-6. </b>Connect Server and Client
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/gamelift/" title="GameLift Classic Lab (Option)" class="dd-item 
        parent
        
        
        ">
      <a href="/aws-gamelift-sample/en/gamelift/">
          <b>4. </b>GameLift Classic Lab (Option)
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/gamelift/lab41/" title="Making Lambda Functions" class="dd-item 
        
        active
        
        ">
      <a href="/aws-gamelift-sample/en/gamelift/lab41/">
          <b>4-1. </b>Making Lambda Functions
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/gamelift/lab42/" title="Configuring API Gateway" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/gamelift/lab42/">
          <b>4-2. </b>Configuring API Gateway
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/gamelift/lab43/" title="S3 Web Hosting" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/gamelift/lab43/">
          <b>4-3. </b>S3 Web Hosting
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/gamelift/lab44/" title="Creating Game Server Build &amp; Fleet" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/gamelift/lab44/">
          <b>4-4. </b>Creating Game Server Build &amp; Fleet
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/gamelift/lab45/" title="Creating Matchmaker Server" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/gamelift/lab45/">
          <b>4-5. </b>Creating Matchmaker Server
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/gamelift/lab46/" title="Game Client Settings &amp; Game Play!" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/gamelift/lab46/">
          <b>4-6. </b>Game Client Settings &amp; Game Play!
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/cleanup/" title="Clean Up" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/cleanup/">
          <b>5. </b>Clean Up
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/aws-gamelift-sample/en/appendix/" title="Appendix" class="dd-item 
        
        
        
        ">
      <a href="/aws-gamelift-sample/en/appendix/">
          <b>6. </b>Appendix
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
              
                  
                    
                    
                      <option id="ko" value="/aws-gamelift-sample/ko/gamelift/lab41/">한국어</option>
                    
                  
              
          
              
              
                  
                    
                    
                      <option id="en" value="/aws-gamelift-sample/en/gamelift/lab41/" selected>English</option>
                    
                  
              
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      © 2020 Amazon Web Services, Inc. or its Affiliates. All rights reserved.

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/aws-gamelift-sample/en/'>GameLift HoL</a> > <a href='/aws-gamelift-sample/en/gamelift/'>GameLift Classic Lab (Option)</a> > Making Lambda Functions
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#making-lambda-functions-brbr">Making Lambda Functions <!-- raw HTML omitted --><!-- raw HTML omitted --></a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Making Lambda Functions
            </h1>
          

        




	
<div class="notices tip" ><p>If you deploy CloudFormation stack, Lambda functions and API Gateway have already been made. You should put required part of these resources.</p>
</div>

<h3 id="making-lambda-functions-brbr">Making Lambda Functions <!-- raw HTML omitted --><!-- raw HTML omitted --></h3>
<p>Until last part, we have made AWS services for Full Stack Game. From now on, we are making Lambda functions to handle Game Process.</p>
<p>In this lab, we are creating Three Lambda functions.</p>
<p>Let&rsquo;s make first one.</p>
<ol>
<li>
<p>Move to Lambda menu on console. <a href="https://console.aws.amazon.com/lambda">https://console.aws.amazon.com/lambda</a></p>
</li>
<li>
<p>Click &ldquo;Create function&rdquo; button and create first function.</p>
</li>
<li>
<p>Select &ldquo;Author from scratch&rdquo;, and create empty function.</p>
</li>
<li>
<p>Put <em>game-sqs-process</em> as Name.</p>
</li>
<li>
<p>Select Runtime as Python 3.9.</p>
</li>
<li>
<p>In Permissions tab, choose &ldquo;Use an existing role&rdquo; and select &ldquo;Gomok-game-sqs-process&rdquo;. Execute &ldquo;Create function&rdquo;.</p>
</li>
<li>
<p>When it is completed, select SQS(Simple Queue Service) as trigger of this function on Designer Group. Than you can create &ldquo;Configure triggers&rdquo; group below.</p>
</li>
</ol>
<p><img src="../../images/gamelift/lab41/Lambda-1%5Ben%5D.png" alt="Lambda"></p>
<ol start="8">
<li>Check SQS queue. It should indicate arn of SQS that has been created before.</li>
</ol>
<p><img src="../../images/gamelift/lab41/Lambda-11%5Ben%5D.png" alt="Lambda"></p>
<p>Advanced settings: 128MB Memory and 1 min timeout</p>
<p><img src="../../images/gamelift/lab41/Lambda-2%5Ben%5D.png" alt="Lambda"></p>
<ol start="9">
<li>Let&rsquo;s move back to Designer Group. We are making Lambda functions. Please refer &ldquo;GameResultProcessing.py&rdquo; on your source code (Root Folder &gt; Lambda &gt; GameResultProcessing.py).</li>
</ol>
<p>Code: Copy contents of GameResultProcessing.py and Paste code to Lambda function. Change proper region_name for your lab. (ex: ap-northeast-2)</p>
<p><img src="../../images/gamelift/lab41/Lambda-3%5Ben%5D.png" alt="Lambda"></p>

<div class="notices warning" ><p>Please check Lambda functions <em>Handler</em>. Lambda function can access this handler when it is executed.</p>
</div>

<ol start="10">
<li>Click &ldquo;Save&rdquo; button to create function. Created function read game result record that is stored in SQS, and update DynamoDB. Lambda function polls SQS queue continously, gets message and updates DynamoDB table.</li>
</ol>

<div class="notices tip" ><p>In this lab, we provide Python Package for comfort. For source codes GetRank.py and Scoring.py, please refer <strong>Lambda / LambdaDeploy</strong>.</p>
</div>

<p>Second Lambda function will be created by uploading Python package.
Unlike First function only uses Python standard SDK for its logic, some Lambda functions use External Library like Redis.
So, we are using Deploy package for making lambda functions.</p>
<p>It will be a good opportunity to make lambda functions with package.</p>
<ol>
<li>
<p>You can see two Python files GetRank.py and Scoring.py under Lambda/LambdaDeploy.</p>
</li>
<li>
<p>Compress All files on the folder as name &ldquo;LambdaDeploy.zip&rdquo; (Notice: LambdaDeploy should not be included on the zipped file. GetRank.py and Scoring.py should be located root path of the compressed file)</p>
</li>
<li>
<p>We can make Lambda function using this Deploy Package.</p>
</li>
<li>
<p>Click &ldquo;Create Function&rdquo; and select &ldquo;Author from scratch&rdquo; to create function.</p>
</li>
<li>
<p>Set Name as game-rank-update, and Runtime as Python 3.9, Role as Gomok-game-rank-update. Click Create function button.</p>
</li>
<li>
<p>Select <strong>Upload a .ZIP file</strong> in Function code Group, and upload LambdaDeploy.zip.</p>
</li>
<li>
<p>Put <em>Scoring.handler</em> as Handler, and ElastiCache Endpoint(we made before) for Environment Variables like below. <br>
You can manage endpoint safely and efficiently using this Environment Variables without hard-coding.</p>
</li>
</ol>
<p><img src="../../images/gamelift/lab41/Lambda-4%5Ben%5D.png" alt="Lambda"></p>
<ol start="8">
<li>
<p>Set function Timeout 1 minute.</p>
</li>
<li>
<p>Set VPC same as ElastiCache in function configuration. Select all Subnets and Security Group that we made before (GomokuDefault).</p>
</li>
</ol>
<p><img src="../../images/gamelift/lab41/Lambda-5%5Ben%5D.png" alt="Lambda"></p>
<ol start="10">
<li>Select DynamoDB as Triggers on Designer Group above.</li>
</ol>
<p><img src="../../images/gamelift/lab41/Lambda-6%5Ben%5D.png" alt="Lambda"></p>
<ol start="11">
<li>We are using DynamoDB Table &ldquo;GomokuPlayerInfo&rdquo; as Configuration Trigger of Lambda function. Setting DynamoDB trigger like below. Check &ldquo;Enable Trigger&rdquo; and click Add button.</li>
</ol>
<p><img src="../../images/gamelift/lab41/Lambda-7%5Ben%5D.png" alt="Lambda"></p>
<ol start="12">
<li>After process is completed, click &ldquo;Save&rdquo; button. For now, it will be failed if you click Test for this function.</li>
</ol>
<p>Last but not least, let&rsquo;s make 3rd Lambda function. It can be made same way.</p>
<ol>
<li>
<p>Create Lambda function with &ldquo;Author from scratch&rdquo;.</p>
</li>
<li>
<p>Put function name game-rank-reader, Python 3.9 as Runtime, set Gomok-game-rank-reader as Role.</p>
</li>
<li>
<p>Click Create function, select &ldquo;Upload a .ZIP file&rdquo; on Code entry type. Upload LambdaDeploy.zip for this function.</p>
</li>
<li>
<p>Put <strong>GetRank.handler</strong> in Function Code Handler. Make Environment variable as same as before.</p>
</li>
</ol>
<ul>
<li>Key : REDIS</li>
<li>Value : [ElastiCache Endpoint without port number]</li>
</ul>
<ol start="5">
<li>
<p>Set Timeout 1 minute in Basic settings. Configure VPC as same as VPC that ElastiCache is located. Select all subnets and Security Group that we made previously.</p>
</li>
<li>
<p>Save and Complete Lambda function.</p>
</li>
</ol>
<p>Now we can check Three Lambda functions are made. (If you tried CloudFormation, that there would be Five)</p>
<p><img src="../../images/gamelift/lab41/Lambda-8.png" alt="Lambda"></p>
<p>Lambda functions are prepared! Nextly, we are considering how to run these functions.
First two functions are triggered by SQS and DynamoDB, but we have not designated trigger for last function.</p>
<p>We are using API Gateway for this function. Let&rsquo;s make API Gateway!</p>
<hr>
<h4 id="lambda-function-test-brbr">Lambda function Test <!-- raw HTML omitted --><!-- raw HTML omitted --></h4>
<p>If you finished this page, you are able to test how components that we made work. <br>
When SQS takes data, Lambda functions will be triggered. And the function updates data to DynamoDB.
Data updated to DynamoDB, triggers another Lambda function by DynamoDB Stream. And this function updates Redis Cache for Ranking Leaderboard.</p>
<p>We can test this process simply.</p>
<ol>
<li>Open console to access SQS (<a href="https://console.aws.amazon.com/sqs">https://console.aws.amazon.com/sqs</a>)</li>
<li>Select game-result-queue and click Queue Actions button.</li>
<li>Click Send Message from drop-down.</li>
<li>Put JSON data like below on the text box.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{ <span style="color:#f92672">&#34;PlayerName&#34;</span> : <span style="color:#e6db74">&#34;SomeName&#34;</span> , <span style="color:#f92672">&#34;WinDiff&#34;</span> : <span style="color:#ae81ff">1</span>, <span style="color:#f92672">&#34;LoseDiff&#34;</span> : <span style="color:#ae81ff">0</span>, <span style="color:#f92672">&#34;ScoreDiff&#34;</span> : <span style="color:#ae81ff">100</span> }
</span></span></code></pre></div><ul>
<li>If it has parse issue, please put text by yourselves</li>
</ul>
<ol start="5">
<li>Click &ldquo;Send Message&rdquo;</li>
<li>You can check Item changed on DynamoDB &ldquo;GomokuPlayerInfo&rdquo; table.</li>
</ol>
<ul>
<li>If it has an issue, you are able to debug logs from CloudWatch.</li>
</ul>
<hr>
<!-- raw HTML omitted -->





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/aws-gamelift-sample/en/gamelift/" title="GameLift Classic Lab (Option)"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/aws-gamelift-sample/en/gamelift/lab42/" title="Configuring API Gateway" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/aws-gamelift-sample/en/js/clipboard.min.js?1657726513"></script>
    <script src="/aws-gamelift-sample/en/js/perfect-scrollbar.min.js?1657726513"></script>
    <script src="/aws-gamelift-sample/en/js/perfect-scrollbar.jquery.min.js?1657726513"></script>
    <script src="/aws-gamelift-sample/en/js/jquery.sticky.js?1657726513"></script>
    <script src="/aws-gamelift-sample/en/js/featherlight.min.js?1657726513"></script>
    <script src="/aws-gamelift-sample/en/js/highlight.pack.js?1657726513"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/aws-gamelift-sample/en/js/modernizr.custom-3.6.0.js?1657726513"></script>
    <script src="/aws-gamelift-sample/en/js/learn.js?1657726513"></script>
    <script src="/aws-gamelift-sample/en/js/hugo-learn.js?1657726513"></script>

    <link href="/aws-gamelift-sample/en/mermaid/mermaid.css?1657726513" rel="stylesheet" />
    <script src="/aws-gamelift-sample/en/mermaid/mermaid.js?1657726513"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    
  </body>
</html>
